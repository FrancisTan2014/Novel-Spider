using System;
using FluentAssertions;
using Microsoft.VisualStudio.TestTools.UnitTesting;
using NS.Utilities;

namespace NS.UtilitiesTest
{
    [TestClass]
    public class StringExtensionTest
    {
        #region 测试文本
        private string htmlSource = "&nbsp;&nbsp;&nbsp;&nbsp;浓郁如墨的夜色，笼罩整片空间，黑暗中一座苍茫大山若隐若现，高耸入云。<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;从窗外看去，像是一头不知名的洪荒巨兽，默默的耸立在天地之间，在似有似无的闪电照耀下，平白的显露出一丝狰狞。<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;大山脚下，错落有致的坐落着数十座青瓦小院。点点微弱的火光从这些院落中渗透出来，很快又被浓郁的夜色吞没。<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;“刺啦！”<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;伴随着一声刺耳的锐鸣，一道树枝状的闪电从苍穹深处划过，带来一阵炫目的光芒，一闪即逝。<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;下一刻，一声惊天霹雳轰然而降，像是上苍的愤怒巨吼，震得人耳朵发麻。<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;“啪！”<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;小屋中，一个十来岁大的小女孩被这声霹雳一吓，手一松，手中的青瓷茶杯掉在地上，摔得粉碎。小女孩被吓得一个哆嗦，心有余悸的冲到床边，漂亮的大眼睛里顿时充满了泪水。<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;“楚晨哥哥，你什么时候能醒来啊……”<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;此时在床上，躺着一个看起来十四、五岁的少年，少年面色清秀，虽然在沉睡中，带着一丝稚嫩的面容上却不时的闪现出一抹痛苦的神色。他的皮肤呈现出一种不正常的红色，让人看着心惊不已。<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;小女孩用手轻轻的在少年脸上摸了一下，立刻如同触电一样的缩回。少年的身上烫的吓人，可是流出的汗却冰冷刺骨，无比的诡异。<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;“楚晨哥哥，你可千万不要有事啊……”<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;看着少年脸上的痛苦，小女孩又是心疼，又是难过。哭了一会儿后，少女擦干眼泪，盘腿坐在床边，双手平伸向前，闭目凝神。漂亮的仿佛瓷娃娃一样的小脸上，带着一丝少有的坚强<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;下一刻，一阵阵朦胧的清光从少女平伸的掌心中浮现而出，丝丝缕缕的向着床上的少年冲去。<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;那朦胧的清光竟然像是拥有自主的生命，丝丝缕缕像是一条条灵活的小蛇，自主的从少年口鼻处钻入，没入他体内。<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;清光入体，少年脸上痛苦的表情顿时得到了一丝缓解，紧紧皱起的眉头，也微微伸展开来。<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;清光氤氲，逐渐变得浓郁。在少女光洁的额头上，逐渐出现一层细密的薄汗。<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;她双手迅速的在身前扣了几个印决，清光愈发强烈，己欲凝成实质，在少女的掌心中，甚至于浮现出六颗明亮温润，仿佛水滴一般的光球，散发出一股股浓郁的清凉之气。。<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;这一幕如果被旁人看到，肯定会引发一阵阵惊呼，这少女看起来年纪轻轻，只不过十来岁大小，其灵力修为竟然达到了修炼的第二个大境界，“玄灵化水”的“灵水境”六重！<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;也就是说这一脸稚气少女，已经能真正的将天地间的灵气化为己用，并且其凝聚的“灵水”达到了六滴之多。这在任何一个宗派，都已经足以成为内门弟子！<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;十来岁的内门弟子，不管在任何地方，都足以当之无愧的被冠以“天才”的称号！<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;幼小的小女孩并不知道自己的行为有多么的惊世骇俗。在她全力催发体内灵水之下，浩瀚的灵气白茫茫一片，仿佛瀑布一样冲刷入少年体内，让少年痛苦神色大大的减轻。灵气乃是生命的根本，无论受多重的伤，只要有充足的灵气供应，那便是源源不绝的生命力。<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;只是这全力催发灵水，极耗灵力，短短半柱香时间过后，少女身上已经汗如雨下。<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;灵气乃是一个修士的根本。每一分灵气都极为宝贵，若不是至亲之人，甚少有修士愿意这样大量的耗费灵气去为人疗伤，这是一种极为奢侈的“浪费”。<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;终于，半柱香过后，少女也到达了自己的极限，六颗晶莹剔透的灵水光芒黯淡，重新没入体内，少女面色萎靡，擦了擦汗。<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;“可惜了，要是楚晨哥哥凝炼出了‘灵水’。我的这些灵气就不会白白的散掉，能够早点让他康复了。”<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;这样想着，少女只感觉眼前一黑，再也支撑不住疲惫，软软的倒在少年胸口上。<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;轰！<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;伴随着一声声雷鸣，浓郁的夜色下，覆盖了整个苍穹的乌云再也不迟疑，在一阵阵电闪雷鸣中，倾盆大雨轰然而下，整个天地之间，顿时水汽氤氲，升腾而起。<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;####################################################################<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;楚晨感觉自己做了一个梦，梦里四周都是一片的黑暗，看不见一点儿光芒。<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;他最后的记忆，就是采药时从高高的葬龙陵上坠落，如果不是为了该死的“例药”，自己也不会落到这步田地吧？<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;楚晨所在的“碧泉仙宗”规定，大凡外门弟子，每月要采购三斤三两三分一阶灵药，供给宗派，才能得到宗派所传授的部分“引灵诀”与当月的修炼丹药，这灵药又称之为“例药”。<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;无论是谁，如果连续三个月交不够例药的，便要被逐出宗门！<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;宗派并不是单纯的慈善机构，任何宗派，对于门下弟子的要求都极为严格。<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;根骨、资质、悟性、天赋好的弟子，会被当做宝贝，收为内门弟子。不仅有着上乘的功法、丹药供给，更是在其他方面倾注心血全力培养。<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;而大多数资质并不好的弟子，只能成为外门弟子。虽然仍然挂着弟子的名号，其本质上与仆从、杂役并无区别，想要留在宗派，就要为宗派做出相应的贡献。这每月的“例药”，便是其中的一部分。<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;倒霉的楚晨已经两个月没有交够例药了，上个月若不是小师妹鼎力相助，偷偷将自己采摘的“灵药”分给他一部分，只怕他早就被那个铁面无私的外门长老逐出师门了。<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;灵药，便是天生含有灵气的草药。<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;大部分灵药，在外型上与普通的杂草并无区别，但是其本身蕴含着微弱的灵力波动。<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;只要修炼“引灵决”稍微有小成的外门弟子，身体被灵力冲刷过后，细心之下不难感应到灵药的灵力波动。<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;因此，这“例药”的规矩，其实也是宗派筛选外门弟子的一种手段。天赋好的，感应起灵力波动毫不费力，修炼起来也事半功倍，天赋不好的，资质愚钝的，感应不到灵药的灵力波动，再怎么培养其成就也有限。<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;而楚晨，便是那些资质奇差的弟子中的一员。自从三年前进入碧泉仙宗外门修炼开始，无论他如何努力的修炼“引灵决”，都无法真切的感应到“灵气”的存在，致使其整整三年间修为几乎丝毫不见增长。<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;别的弟子大都已经脱离第一境界“灵气境”，大多天赋较好的弟子甚至进入了第二境界“灵水境”，而楚晨始终停留在“灵气境”二重。<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;不管他多拼命的修炼，只要他一入定，驱动引灵诀，便会感觉到周围虚空仿佛海啸一样，无数的紊乱的气流向着他汹涌而来，他就像海啸中的一叶小舟，随时会翻船一般，根本无法修炼。<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;楚晨虽然也无数次怀疑自己也许不适合修炼，但他始终没有放弃，继续坚定的修炼，比任何人都要更努力，更拼命。<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;即使只是别人眼中微不足道的“灵气境”二重，他付出的努力已经是别人百倍、千倍。<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;因为无法用灵气搜索“灵药”，他每天还要拼了命似的花大量时间四处寻找灵药，在野外露宿也是家常便饭。<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;如果不是他刻苦拼命，每月堪堪可以凑齐三斤三两三分的“例药”，他早已经没有资格待在这里。<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;随着宗派周围的山野之中，灵药渐渐被采光了，或者一些高产灵药的风水宝地被高等级的外门弟子包场，楚晨的日子就越来越不好过，每次采药只能越跑越远，越采越少。<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;这一次，因为连续交不够例药，迫不得已之下，楚晨只好铤而走险，进入人迹罕至的禁区“葬龙陵”采药。<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;“葬龙陵”是一大片陵墓区，碧泉仙宗的弟子是绝对不允许进入的，因为“葬龙陵”紧挨着死亡之地“黑雾谷”。<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;黑雾谷地如其名，乃是一处“葬龙陵”边缘的山谷，没有人知道这个山谷的大小。<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;因为这个经常传来恐怖异响，更是有着弄若泼墨的雾气升腾之地，再厉害的强者，擅自进入也会立即全身枯萎，或者爆体而亡。<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;据说“碧落仙宗”的开宗老祖，就是因为实力提升到无上境界，决定一探“黑雾谷”究竟，结果进入谷口不到百丈，就爆体而亡，从些整个宗派都谨记祖训，远离此地。<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;寻常弟子，在谷外不小心沾到飘出的黑雾，都会迅速死去。<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;楚晨进入“葬龙陵”之后，意外在谷口边缘的一座高高陵墓的顶部，看到了一棵枯树，枯树根旁长着几株碧绿的灵草。<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;楚晨兴奋之下，用尽全力攀爬高高的陵墓，结果却在快要登顶时体力不支，失手滑落，直接摔了下去。<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;更倒霉的是，他下坠的过程中还沾到了飘出谷外的零星黑雾，便陷入了意识模糊的状态。<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;如果不是小师妹坚持要找自己，带着搜救队进入“葬龙陵”，恐怕自己的尸体都不会回到宗门。<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;刚回宗门时自己还有一些意识，现在已经彻底的陷入了黑暗之中，看来自己已经难逃一死。<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;一直在黑暗中的楚晨，突然看到一线异样的光亮，他挣扎着猛的飞向光亮。<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;这……<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;强烈的光线，让楚晨眼睛微微一缩，渐渐清晰之后，视线划过某个地方，他心中一震！<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;这是黑雾谷外！<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;对于这片地方，楚晨实在是太熟悉了，这正是自己“采药失足”出事的地方。<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;楚晨发现自己的灵魂，似乎悬在“黑雾谷”上方的高空中！<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;难道是自己已经死了，“死后”第一个看到的地方，竟然是这里！<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;楚晨心中微微一惊，视线向下一扫，果然见到了那一个光秃秃的陵墓，陵墓的顶部有一棵枯死的老树，老树上方有一个鹰巢，下方的老树根部，一丛绿油油的灵草随着微风轻轻舞动，灵气浓郁的连肉眼都能看到。<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;当初，就是为了这一片灵草，他才活生生的被“摔死”！<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;这个常年飘出黑雾的地方，根本就没有生物敢接近，因为沾到就死，这里怎么会有一个鹰巢？<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;楚晨摇摇头，下意识的抬起头，视线穿过巍峨雄壮的葬龙陵。望向那一片朦胧的黑雾笼罩之下，似乎蕴含着无尽的秘密。<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;楚晨心中，涌动出一股无法遏制的好奇和冲动。<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;这片禁区，究竟有着什么？竟然令当年修为通天彻地的开宗老祖身陨毙命？？反正自己都死了，干脆探查一番这个生前绝对不可能接近之地！<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;这样想着，楚晨念头微动间，觉得自己的意识像是化作了一只大鸟。<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;向着那一片朦胧的黑雾呼啸飞去。<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;刚刚飞进黑雾谷上空，便见到下方大地之上，散落着些许惨白色的骸骨，在微弱的天光下散发着渗人的白色光芒。<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;这些应该是擅闯黑雾谷死去的人吧，那个骸骨旁闪着青色宝光的戒指，就是开宗老祖的储物戒指“造化青帝戒”，他怎么会死在这么外围？<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;为什么黑雾谷这么危险，开宗老祖跟其他人还要闯进来？<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;咦，这黑雾谷中不少地方还长着灵药，真是个奇怪的地方！<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;楚晨震惊之余，开始不断往上飞，当冲破云层一般的浓浓黑雾时，他看到了一座巨大的山脉。<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;一座通体漆黑，高耸入云，恢弘无比的古山耸立在苍茫的黑雾中。这黑雾谷竟然隐藏着这么一座恢弘的古山！<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;山上竟然都是尸体，一层又一层的叠在一起，这些尸首大多已经被撕裂，死状极为惨烈，像是发生过一场旷古战争一般。<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;这……不是麒麟吗？一个巨大的血麒麟的头额混在尸堆当中，显得特别耀眼，这战场中竟然还有上古神兽被杀？<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;楚晨很快就发现，自己震惊得太早了，越往上飞，他看到的上古神兽与太古妖魔的尸体就越多。<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;很快他就已经麻木了，不过就在他飞到半山腰时，在群尸中看到了一张熟悉的面孔，一张巨大的太极残图，与整个大地化为一体，黑白两色极其明显。<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;残图边缘，都是要冲进去的尸首，似乎没有人能越图半步，而太极图的中心，是一个面容清矍仙风道骨的老者，这……这分明就是家家户户都供奉的太上老君！<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;他怎么会死在这里？<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;太上老君被一支金色的箭，从心脏部位钉死在自己的“无上太极图”上，他手边还扔着一把银丝如雪的破碎“拂尘”。<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;无上太极图，天界拂尘，这些都是通天彻地的宝物！<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;一个又一个传说中仙人的尸首，他们的法宝与武器四处散落，或已黯淡无光，或还灵光四溢。<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;楚晨隐约已经明白了，为什么这么多强者，要想闯进黑雾谷，这么多宝物，就算是残宝，只要捡到一个就足以成为一方霸者。<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;其实对他来说，只要能捡到谷口处，开宗老祖的遗物“造化青帝戒”就已知足。<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;当楚晨飞到巨大山脉之巅时，隐约看到一具枯坐在黑暗中的尸首，死去已不知多少万年，尸身竟然还散发着，镇压天地，左右着整个空间的气息。<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;一道闪电突然照亮了整个世界，他赫然看清楚了，那羽化仙去，只剩下半具身体的道人，正是传说中的鸿钧道人，鸿钧老祖！！！<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;无数的惊雷相继在天空中炸响，楚晨的意识突然又遁入了黑暗。";
        #endregion

        [TestMethod]
        public void RemoveHtmlTagsTest()
        {
            string source = null;
            Action action = () => source.RemoveHtmlTags();
            action.ShouldThrow<ArgumentNullException>();

            var pattern = "(<div>)|(</div>)|(<p>)|(</p>)|(<br/>)|(<br\\s/>)|(&nbsp;)|(\\s+)";
            var noHtmlContent = htmlSource.RemoveHtmlTags();
            
            noHtmlContent.Should().NotMatch(pattern);
        }

        [TestMethod]
        public void RemovePunctuationsTest()
        {
            string source = null;
            Action action = () => source.RemovePunctuations();
            action.ShouldThrow<ArgumentNullException>();

            var pattern = "[“”！，。、~-——‘’《》]";
            var noPunctuations = htmlSource.RemovePunctuations();

            noPunctuations.Should().NotMatch(pattern);
        }
    }
}
